<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ë§ì¶¤ ìš´ë™ - ë°”ë¥¸ ê²°</title>
    <style>
        :root { --main-green: #556B2F; --bg-beige: #F9F9F7; }
        body { margin: 0; background: var(--bg-beige); font-family: -apple-system, sans-serif; display: flex; flex-direction: column; align-items: center; height: 100vh; padding: 40px 20px; box-sizing: border-box; overflow: hidden; }
        
        .status-badge { background: #E8EDE0; color: var(--main-green); padding: 10px 20px; border-radius: 25px; font-weight: bold; margin-bottom: 20px; font-size: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .exercise-title { font-size: 24px; font-weight: bold; text-align: center; margin-bottom: 10px; color: #333; }
        
        /* ê¸°ë¦° ìºë¦­í„° ê°€ì´ë“œ ì• ë‹ˆë©”ì´ì…˜ */
        .exercise-visual { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; position: relative; }
        .giraffe-guide { width: 200px; animation: moveNeck 3s ease-in-out infinite; }
        
        /* ê¸°ë¦°ì´ ëª© ìš´ë™ì„ í•˜ëŠ” ë“¯í•œ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes moveNeck {
            0%, 100% { transform: rotate(0deg) translateY(0); }
            50% { transform: rotate(-10deg) translateY(-10px); }
        }

        .counter-container { text-align: center; margin-bottom: 40px; }
        .count-display { font-size: 72px; font-weight: 900; color: var(--main-green); line-height: 1; }
        .count-total { font-size: 20px; color: #AAA; font-weight: bold; }

        .instruction-card { background: white; padding: 20px 40px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); text-align: center; width: 100%; }
        .instruction-card p { margin: 0; font-size: 16px; color: #555; font-weight: 500; }
    </style>
</head>
<body>
    <div id="statusBadge" class="status-badge">ë°ì´í„° ë¶„ì„ ì™„ë£Œ!</div>
    
    <div id="exTitle" class="exercise-title">ê¸°ë¦° ëª© ìŠ¤íŠ¸ë ˆì¹­</div>
    <p style="color: #888; text-align: center; font-size: 14px; margin-top: 0;">ê¸°ë¦° ìºë¦­í„°ì˜ ì›€ì§ì„ì— ë§ì¶°<br>ì²œì²œíˆ ê³ ê°œë¥¼ ì›€ì§ì—¬ë³´ì„¸ìš”.</p>

    <div class="exercise-visual">
        <img src="giraffe-character.png" alt="ìš´ë™ ê°€ì´ë“œ ê¸°ë¦°" class="giraffe-guide" onerror="this.src='https://img.icons8.com/illustrations/parallax/512/giraffe.png'">
        <div style="margin-top: 20px; font-size: 12px; color: var(--main-green); font-weight: bold; letter-spacing: 1px;">AI ì‹¤ì‹œê°„ ì›€ì§ì„ ê°ì§€ ì¤‘</div>
    </div>

    <div class="counter-container">
        <span id="currentCount" class="count-display">0</span>
        <span id="totalCount" class="count-total">/ 5íšŒ</span>
    </div>

    <div class="instruction-card">
        <p id="actionMsg">ì¤€ë¹„ ë˜ì…¨ë‚˜ìš”? ì‹œì‘í•©ë‹ˆë‹¤!</p>
    </div>

    <script>
        // exercise.htmlì—ì„œ ì €ì¥í•œ AI ë¶„ì„ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        const resultData = JSON.parse(localStorage.getItem('bareunGyeolReportData') || '{"neckStatus":"good"}');
        
        const statusBadge = document.getElementById('statusBadge');
        const exTitle = document.getElementById('exTitle');
        const totalCountLabel = document.getElementById('totalCount');
        const actionMsg = document.getElementById('actionMsg');

        let goalCount = 5;

        // 1. ìƒíƒœë³„ ë§ì¶¤ ì„¤ì • (ì‹¬ê°/ì£¼ì˜ ë“± ë¶ˆì¾Œí•œ ë‹¨ì–´ ì œê±°)
        if (resultData.neckStatus === 'good') {
            statusBadge.innerText = "âœ¨ ê²°ì´ ì•„ì£¼ ë§‘ê³  ê³ ìš´ ìƒíƒœì˜ˆìš”";
            exTitle.innerText = "ìœ ì—°í•¨ì„ ë”í•˜ëŠ” ê²° ìœ ì§€ ìš´ë™";
            goalCount = 5;
        } else if (resultData.neckStatus === 'caution') {
            statusBadge.innerText = "ğŸŒ¿ ê²°ì„ ì¡°ê¸ˆ ë‹¤ë“¬ì–´ì£¼ë©´ ì¢‹ê² ì–´ìš”";
            exTitle.innerText = "ê¸´ì¥ì„ í’€ì–´ì£¼ëŠ” ê²° ìˆœí™˜ ìš´ë™";
            goalCount = 8;
        } else {
            statusBadge.innerText = "ğŸ”‹ ê²°ì— ìƒˆë¡œìš´ ì—ë„ˆì§€ê°€ í•„ìš”í•´ìš”";
            exTitle.innerText = "ì •ë ¬ì„ ì°¾ì•„ì£¼ëŠ” ì§‘ì¤‘ ê²° êµì •";
            goalCount = 12;
        }

        totalCountLabel.innerText = `/ ${goalCount}íšŒ`;

        // 2. ì¹´ìš´íŒ… ì‹œë®¬ë ˆì´ì…˜ (AIê°€ ì›€ì§ì„ì„ ê°ì§€í•˜ì—¬ ì¹´ìš´íŠ¸í•˜ëŠ” ì—°ì¶œ)
        let currentCount = 0;
        const startExercise = () => {
            const exerciseInterval = setInterval(() => {
                currentCount++;
                document.getElementById('currentCount').innerText = currentCount;
                
                // ë§¤ ì¹´ìš´íŠ¸ë§ˆë‹¤ ê²©ë ¤ ë©”ì‹œì§€
                if (currentCount % 2 === 0) actionMsg.innerText = "ì •ë§ ì˜í•˜ê³  ìˆì–´ìš”! ì¡°ê¸ˆë§Œ ë”!";
                else actionMsg.innerText = "ì¢‹ì•„ìš”! ê¸°ë¦°ì²˜ëŸ¼ ì­‰ í´ë³´ì„¸ìš”.";

                if (currentCount >= goalCount) {
                    clearInterval(exerciseInterval);
                    actionMsg.innerText = "ğŸ‰ ëª¨ë“  ìš´ë™ ì™„ë£Œ! ë¦¬í¬íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.";
                    actionMsg.style.color = "var(--main-green)";
                    
                    // ì™„ë£Œ í›„ ë¦¬í¬íŠ¸ë¡œ ì´ë™
                    setTimeout(() => {
                        location.href = 'report.html';
                    }, 2000);
                }
            }, 3000); // 3ì´ˆì— 1íšŒì”© ì¹´ìš´íŠ¸ (ë™ì‘ ì†ë„ ê³ ë ¤)
        };

        // í˜ì´ì§€ ë¡œë“œ 1.5ì´ˆ í›„ ìš´ë™ ì‹œì‘
        setTimeout(startExercise, 1500);
    </script>
</body>
</html>
